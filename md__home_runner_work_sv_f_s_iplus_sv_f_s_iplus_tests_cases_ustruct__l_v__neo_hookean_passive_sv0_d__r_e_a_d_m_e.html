<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>svFSIplus: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">svFSIplus
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This test case simulates an idealized left ventricle (LV) with a NeoHookean material model coupled to a lumped-parameter network (LPN), implemented in sv0DSolver. The LPN consists of a large pressure source and large resistor, which together produce an approximately constant flowrate into the LV. This inflates the LV at an approximately constant rate of change of volume.</p>
<h3><a class="anchor" id="autotoc_md155"></a>
Build svZeroDSolver</h3>
<p>Importantly, to automatically run test cases with <code>pytest</code> (see below), you need to build <code>svZeroDSolver</code> in the folder </p><div class="fragment"><div class="line">./svZeroDSolver/build</div>
</div><!-- fragment --><p> in the repository root.</p>
<p>To do so, you can run the following in the svFSIplus repository root: </p><div class="fragment"><div class="line">git clone https://github.com/SimVascular/svZeroDSolver.git</div>
<div class="line">cd svZeroDSolver</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make -j2</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md156"></a>
Configuration of sv0DSolver</h2>
<p>The following files require user's attention: <a href="./svFSI.xml">svFSI.xml</a>, <a href="./svzerod_3Dcoupling.json">svzerod_3Dcoupling.json</a> and <a href="./svZeroD_interface.dat">svZeroD_interface.dat</a>.</p>
<h3><a class="anchor" id="autotoc_md157"></a>
svFSI.xml</h3>
<p>The input file <a href="./svFSI.xml">svFSI_genBC.xml</a> follows the master input file as a template, but with coupling to sv0DSolver specified in the options:</p>
<div class="fragment"><div class="line">&lt;Couple_to_svZeroD type=&quot;SI&quot;&gt;</div>
<div class="line">&lt;/Couple_to_svZeroD&gt;</div>
</div><!-- fragment --><p>This tells the solver that the 0d models will be calculated through sv0DSolver. Options to couple 0D codes with svFSI are <code>N</code>: none; <code>I</code>: implicit; <code>SI</code>: semi-implicit; <code>E</code>: explicit.</p>
<div class="fragment"><div class="line">&lt;Add_BC name=&quot;top&quot; &gt; </div>
<div class="line">   &lt;Type&gt; Dirichlet &lt;/Type&gt; </div>
<div class="line">   &lt;Value&gt; 0.0 &lt;/Value&gt;</div>
<div class="line">&lt;/Add_BC&gt; </div>
<div class="line"> </div>
<div class="line">&lt;Add_BC name=&quot;endo&quot; &gt; </div>
<div class="line">   &lt;Type&gt; Neu &lt;/Type&gt; </div>
<div class="line">   &lt;Time_dependence&gt; Coupled &lt;/Time_dependence&gt; </div>
<div class="line">   &lt;Follower_pressure_load&gt; true &lt;/Follower_pressure_load&gt; </div>
<div class="line">&lt;/Add_BC&gt; </div>
</div><!-- fragment --><p>In this example, we use the LPN for the flow into the endocardial surface.</p>
<h3><a class="anchor" id="autotoc_md158"></a>
svzerod_3Dcoupling.json</h3>
<p>This is the configuration file for sv0DSolver and contains the elements of the 0D model being coupled to the 3D simulation.</p>
<p>For more information on the available parameters and elements, documentation is available here: <a href="https://github.com/SimVascular/svZeroDSolver">svZeroDSolver</a></p>
<p><b>The following are necessary in "simulation_parameters" for a coupled simulation:</b> "coupled_simulation": true, "steady_initial": false</p>
<p>The boundary condition "P_SOURCE" defines the pressure source, starting with a ramp from 0.0 to 1.0E7 and then a plateau.</p>
<p>The large resistor is defined as a blood vessel block that receives pressure from "P_SOURCE" and has resistance 1.0E5.</p>
<p>The external coupling block "LV_IN" specifies the connection between the 0D model and the coupled surface from svFSIplus. Here, we indicate that it will receive values of flow (type: FLOW) from the outlet (location: outlet) of the resistor block (connected_block: branch0_seg0).</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;simulation_parameters&quot;: {</div>
<div class="line">        &quot;coupled_simulation&quot;: true,</div>
<div class="line">        &quot;number_of_time_pts&quot;: 100,</div>
<div class="line">        &quot;output_all_cycles&quot;: true,</div>
<div class="line">        &quot;steady_initial&quot;: false</div>
<div class="line">    },</div>
<div class="line">    &quot;boundary_conditions&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;bc_name&quot;: &quot;P_SOURCE&quot;,</div>
<div class="line">            &quot;bc_type&quot;: &quot;PRESSURE&quot;,</div>
<div class="line">            &quot;bc_values&quot;: {</div>
<div class="line">                &quot;P&quot;: [0.0, 1.0E7, 1.0E7],</div>
<div class="line">                &quot;t&quot;: [0.0, 0.1, 1.0]</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    ],</div>
<div class="line">    &quot;external_solver_coupling_blocks&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;LV_IN&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;FLOW&quot;,</div>
<div class="line">            &quot;location&quot;: &quot;outlet&quot;,</div>
<div class="line">            &quot;connected_block&quot;: &quot;branch0_seg0&quot;,</div>
<div class="line">            &quot;periodic&quot;: false,</div>
<div class="line">            &quot;values&quot;: {</div>
<div class="line">                &quot;Q&quot;: [1.0, 1.0],</div>
<div class="line">                &quot;t&quot;: [0.0, 1.0]</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    ],</div>
<div class="line">    &quot;junctions&quot;: [],</div>
<div class="line">    &quot;vessels&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;boundary_conditions&quot;: {</div>
<div class="line">                &quot;inlet&quot;: &quot;P_SOURCE&quot;</div>
<div class="line">            },</div>
<div class="line">            &quot;vessel_id&quot;: 0,</div>
<div class="line">            &quot;vessel_length&quot;: 10.0,</div>
<div class="line">            &quot;vessel_name&quot;: &quot;branch0_seg0&quot;,</div>
<div class="line">            &quot;zero_d_element_type&quot;: &quot;BloodVessel&quot;,</div>
<div class="line">            &quot;zero_d_element_values&quot;: {</div>
<div class="line">                &quot;R_poiseuille&quot;: 1.0E5</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md159"></a>
svZeroD_interface.dat</h3>
<p>This file sets up the interface between svFSIplus and sv0DSolver. It requires the path of the dynamic library for svZeroDSolver and the input file (svzerod_3Dcoupling.json) discussed above.</p>
<p>This file also matches the external coupling blocks in the 0D model to the coupled surfaces in svFSIplus: The first element in each line should be the name of the block from the json file and the second element should be the index of the coupled surface in svFSIplus. In this case, there is only one coupled surface with index 0.</p>
<div class="fragment"><div class="line">svZeroD external coupling block names to surface IDs (where surface IDs are from *.svpre file):</div>
<div class="line">LV_IN 0</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
